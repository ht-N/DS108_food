<!doctype html>
<html class="no-js" lang="zxx">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
         <title>Job board HTML-5 Template </title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="manifest" href="site.webmanifest">
		<link rel="shortcut icon" type="image/x-icon" href="assets/img/favicon.ico">

		<!-- CSS here -->
            <link rel="stylesheet" href="assets/css/bootstrap.min.css">
            <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
            <link rel="stylesheet" href="assets/css/price_rangs.css">
            <link rel="stylesheet" href="assets/css/flaticon.css">
            <link rel="stylesheet" href="assets/css/slicknav.css">
            <link rel="stylesheet" href="assets/css/animate.min.css">
            <link rel="stylesheet" href="assets/css/magnific-popup.css">
            <link rel="stylesheet" href="assets/css/fontawesome-all.min.css">
            <link rel="stylesheet" href="assets/css/themify-icons.css">
            <link rel="stylesheet" href="assets/css/slick.css">
            <link rel="stylesheet" href="assets/css/nice-select.css">
            <link rel="stylesheet" href="assets/css/style.css">
            
            <!-- Custom CSS for dropdown fix -->
            <style>
                /* Location dropdown styling to match filter theme */
                .location-select-wrapper {
                    margin-top: 15px;
                    margin-bottom: 20px;
                }
                
                .location-dropdown {
                    width: 100% !important;
                    padding: 12px 16px !important;
                    border: 2px solid #f0f0f0 !important;
                    border-radius: 8px !important;
                    font-size: 15px !important;
                    font-weight: 500 !important;
                    color: #555 !important;
                    background: #fff !important;
                    transition: all 0.3s ease !important;
                    outline: none !important;
                    cursor: pointer !important;
                    min-height: 48px !important;
                    appearance: menulist !important;
                    -webkit-appearance: menulist !important;
                    -moz-appearance: menulist !important;
                    position: relative !important;
                    z-index: 10 !important;
                    display: block !important;
                    visibility: visible !important;
                    opacity: 1 !important;
                }
                
                .location-dropdown:hover {
                    border-color: #1bcf6b !important;
                    box-shadow: 0 2px 8px rgba(27, 207, 107, 0.15) !important;
                }
                
                .location-dropdown:focus {
                    border-color: #1bcf6b !important;
                    box-shadow: 0 0 0 3px rgba(27, 207, 107, 0.1) !important;
                }
                
                .location-dropdown option {
                    padding: 8px 12px !important;
                    background: white !important;
                    color: #555 !important;
                    font-size: 14px !important;
                    border: none !important;
                }
                
                .location-dropdown option:hover {
                    background: #f8f9fa !important;
                }
                
                /* Hide any nice-select elements for location filter */
                .location-select-wrapper .nice-select {
                    display: none !important;
                }
                
                /* Match other filter sections spacing */
                .single-listing .select-Categories {
                    margin-bottom: 0;
                }
                
                /* Responsive styling */
                @media (max-width: 768px) {
                    .location-dropdown {
                        font-size: 14px !important;
                        padding: 10px 14px !important;
                        min-height: 44px !important;
                    }
                }
                
                /* Search Bar Styling */
                .search-job-wrapper {
                    position: relative;
                    max-width: 800px;
                    margin: 0 auto;
                }
                
                .search-input-container {
                    display: flex;
                    align-items: center;
                    background: white;
                    border: 3px solid #f0f0f0;
                    border-radius: 12px;
                    overflow: hidden;
                    transition: all 0.3s ease;
                    box-shadow: 0 2px 12px rgba(0,0,0,0.08);
                }
                
                .search-input-container:hover {
                    border-color: #1bcf6b;
                    box-shadow: 0 4px 20px rgba(27, 207, 107, 0.15);
                }
                
                .search-input-container:focus-within {
                    border-color: #1bcf6b;
                    box-shadow: 0 0 0 4px rgba(27, 207, 107, 0.1);
                }
                
                #job-search-input {
                    flex: 1;
                    border: none;
                    outline: none;
                    padding: 18px 24px;
                    font-size: 16px;
                    color: #333;
                    background: transparent;
                }
                
                #job-search-input::placeholder {
                    color: #999;
                    font-style: italic;
                }
                
                #job-search-btn {
                    background: #1bcf6b;
                    color: white;
                    border: none;
                    padding: 18px 28px;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    font-weight: 600;
                    font-size: 16px;
                }
                
                #job-search-btn:hover {
                    background: #17b85d;
                    transform: translateY(-1px);
                }
                
                #job-search-btn:active {
                    transform: translateY(0);
                }
                
                #job-clear-search-btn {
                    background: #dc3545;
                    color: white;
                    border: none;
                    padding: 18px 20px;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    margin-left: 2px;
                }
                
                #job-clear-search-btn:hover {
                    background: #c82333;
                }
                
                .search-suggestions {
                    position: absolute;
                    top: 100%;
                    left: 0;
                    right: 0;
                    background: white;
                    border: 1px solid #ddd;
                    border-top: none;
                    border-radius: 0 0 8px 8px;
                    max-height: 300px;
                    overflow-y: auto;
                    z-index: 1000;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                }
                
                .suggestion-item {
                    padding: 12px 16px;
                    cursor: pointer;
                    border-bottom: 1px solid #f0f0f0;
                    transition: background 0.2s ease;
                }
                
                .suggestion-item:hover {
                    background: #f8f9fa;
                }
                
                .suggestion-item:last-child {
                    border-bottom: none;
                }
                
                /* Search status indicator */
                .search-status {
                    display: inline-flex;
                    align-items: center;
                    gap: 8px;
                    padding: 8px 16px;
                    background: #e3f2fd;
                    color: #1976d2;
                    border-radius: 20px;
                    font-size: 14px;
                    font-weight: 500;
                    margin-bottom: 15px;
                }
                
                .search-status.active {
                    background: #e8f5e8;
                    color: #2e7d32;
                }
                
                .search-status .close-search {
                    background: none;
                    border: none;
                    color: inherit;
                    cursor: pointer;
                    padding: 0;
                    margin-left: 8px;
                    font-size: 16px;
                }
                
                /* Responsive search bar */
                @media (max-width: 768px) {
                    #job-search-input {
                        padding: 14px 18px;
                        font-size: 14px;
                    }
                    
                    #job-search-btn {
                        padding: 14px 20px;
                        font-size: 14px;
                    }
                    
                    #job-search-btn span {
                        display: none;
                    }
                    
                    #job-clear-search-btn {
                        padding: 14px 16px;
                    }
                }
                
                /* Chatbot Styling */
                .chatbot-button {
                    position: fixed;
                    bottom: 30px;
                    right: 30px;
                    width: 60px;
                    height: 60px;
                    background: linear-gradient(135deg, #1bcf6b, #17b85d);
                    border-radius: 50%;
                    border: none;
                    cursor: pointer;
                    box-shadow: 0 4px 20px rgba(27, 207, 107, 0.3);
                    transition: all 0.3s ease;
                    z-index: 1000;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: white;
                    font-size: 24px;
                }
                
                .chatbot-button:hover {
                    transform: scale(1.1);
                    box-shadow: 0 6px 25px rgba(27, 207, 107, 0.4);
                }
                
                .chatbot-button.active {
                    background: linear-gradient(135deg, #ff4757, #ff3742);
                }
                
                .chatbot-container {
                    position: fixed;
                    bottom: 100px;
                    right: 30px;
                    width: 380px;
                    height: 600px;
                    background: white;
                    border-radius: 20px;
                    box-shadow: 0 10px 40px rgba(0,0,0,0.2);
                    display: none;
                    flex-direction: column;
                    z-index: 999;
                    overflow: hidden;
                    border: 1px solid #e0e0e0;
                }
                
                .chatbot-header {
                    background: linear-gradient(135deg, #1bcf6b, #17b85d);
                    color: white;
                    padding: 20px;
                    display: flex;
                    align-items: center;
                    justify-content: between;
                    gap: 12px;
                }
                
                .chatbot-header h4 {
                    margin: 0;
                    font-size: 18px;
                    font-weight: 600;
                    flex: 1;
                }
                
                .chatbot-close {
                    background: none;
                    border: none;
                    color: white;
                    font-size: 20px;
                    cursor: pointer;
                    padding: 0;
                    width: 24px;
                    height: 24px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    border-radius: 50%;
                    transition: all 0.2s ease;
                }
                
                .chatbot-close:hover {
                    background: rgba(255,255,255,0.1);
                }
                
                .chatbot-messages {
                    flex: 1;
                    padding: 20px;
                    overflow-y: auto;
                    display: flex;
                    flex-direction: column;
                    gap: 16px;
                    background: #f8f9fa;
                }
                
                .message {
                    max-width: 80%;
                    padding: 12px 16px;
                    border-radius: 18px;
                    word-wrap: break-word;
                    line-height: 1.4;
                    font-size: 14px;
                }
                
                .message.user {
                    background: #1bcf6b;
                    color: white;
                    align-self: flex-end;
                    border-bottom-right-radius: 6px;
                }
                
                .message.bot {
                    background: white;
                    color: #333;
                    align-self: flex-start;
                    border: 1px solid #e0e0e0;
                    border-bottom-left-radius: 6px;
                    box-shadow: 0 1px 2px rgba(0,0,0,0.1);
                }
                
                .message.typing {
                    background: white;
                    color: #666;
                    align-self: flex-start;
                    border: 1px solid #e0e0e0;
                    border-bottom-left-radius: 6px;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }
                
                .typing-indicator {
                    display: flex;
                    gap: 4px;
                }
                
                .typing-indicator span {
                    width: 8px;
                    height: 8px;
                    background: #1bcf6b;
                    border-radius: 50%;
                    animation: typing 1.4s infinite ease-in-out;
                }
                
                .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
                .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
                
                @keyframes typing {
                    0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
                    40% { transform: scale(1.2); opacity: 1; }
                }
                
                .chatbot-input-area {
                    padding: 20px;
                    border-top: 1px solid #e0e0e0;
                    background: white;
                }
                
                .cv-upload-area {
                    margin-bottom: 16px;
                    padding: 12px;
                    border: 2px dashed #ddd;
                    border-radius: 12px;
                    text-align: center;
                    background: #fafafa;
                    transition: all 0.3s ease;
                    cursor: pointer;
                }
                
                .cv-upload-area:hover {
                    border-color: #1bcf6b;
                    background: #f0fff4;
                }
                
                .cv-upload-area.has-file {
                    border-color: #1bcf6b;
                    background: #f0fff4;
                }
                
                .cv-upload-area.dragover {
                    border-color: #1bcf6b;
                    background: #f0fff4;
                    transform: scale(1.02);
                }
                
                .cv-upload-text {
                    color: #666;
                    font-size: 13px;
                    margin-top: 8px;
                }
                
                .cv-upload-area input[type="file"] {
                    display: none;
                }
                
                .cv-file-info {
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                    padding: 8px 12px;
                    background: #e8f5e8;
                    border-radius: 8px;
                    margin-top: 8px;
                    font-size: 13px;
                    color: #2e7d32;
                }
                
                .cv-remove-btn {
                    background: none;
                    border: none;
                    color: #d32f2f;
                    cursor: pointer;
                    font-size: 16px;
                    padding: 0;
                }
                
                .chat-input-container {
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    background: #f8f9fa;
                    border-radius: 25px;
                    padding: 4px;
                    border: 2px solid #e0e0e0;
                    transition: all 0.3s ease;
                }
                
                .chat-input-container:focus-within {
                    border-color: #1bcf6b;
                    box-shadow: 0 0 0 3px rgba(27, 207, 107, 0.1);
                }
                
                .chat-input {
                    flex: 1;
                    border: none;
                    outline: none;
                    padding: 12px 16px;
                    background: transparent;
                    font-size: 14px;
                    color: #333;
                    min-height: 20px;
                    max-height: 100px;
                    resize: none;
                    font-family: inherit;
                }
                
                .chat-input::placeholder {
                    color: #999;
                }
                
                .chat-send-btn {
                    width: 40px;
                    height: 40px;
                    background: #1bcf6b;
                    color: white;
                    border: none;
                    border-radius: 50%;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    transition: all 0.3s ease;
                    font-size: 16px;
                }
                
                .chat-send-btn:hover {
                    background: #17b85d;
                    transform: scale(1.05);
                }
                
                .chat-send-btn:disabled {
                    background: #ccc;
                    cursor: not-allowed;
                    transform: none;
                }
                
                /* Responsive chatbot */
                @media (max-width: 480px) {
                    .chatbot-container {
                        width: calc(100vw - 20px);
                        height: calc(100vh - 120px);
                        right: 10px;
                        bottom: 80px;
                    }
                    
                    .chatbot-button {
                        bottom: 20px;
                        right: 20px;
                        width: 50px;
                        height: 50px;
                        font-size: 20px;
                    }
                }
            </style>
   </head>

   <body>
    <!-- Preloader Start -->
    <div id="preloader-active">
        <div class="preloader d-flex align-items-center justify-content-center">
            <div class="preloader-inner position-relative">
                <div class="preloader-circle"></div>
                <div class="preloader-img pere-text">
                    <img src="assets/img/logo/logo.png" alt="">
                </div>
            </div>
        </div>
    </div>
    <!-- Preloader Start -->
    <header>
        <!-- Header Start -->
       <div class="header-area header-transparrent">
           <div class="headder-top header-sticky">
                <div class="container">
                    <div class="row align-items-center">
                        <div class="col-lg-3 col-md-2">
                            <!-- Logo -->
                            <div class="logo">
                                <a href="index.html"><img src="assets/img/logo/logo.png" alt=""></a>
                            </div>  
                        </div>
                        <div class="col-lg-9 col-md-9">
                            <div class="menu-wrapper">
                                <!-- Main-menu -->
                                <div class="main-menu">
                                    <nav class="d-none d-lg-block">
                                        <ul id="navigation">
                                            <li><a href="index.html">Trang ch·ªß</a></li>
                                            <li><a href="job_listing.html">Ki·∫øm vi·ªác </a></li>
                                            <!-- <li><a href="about.html">About</a></li>
                                            <li><a href="#">Page</a>
                                                <ul class="submenu">
                                                    <li><a href="blog.html">Blog</a></li>
                                                    <li><a href="single-blog.html">Blog Details</a></li>
                                                    <li><a href="elements.html">Elements</a></li>
                                                    <li><a href="job_details.html">job Details</a></li>
                                                </ul>
                                            </li>
                                            <li><a href="contact.html">Contact</a></li> -->
                                        </ul>
                                    </nav>
                                </div>          
                            </div>
                        </div>
                        <!-- Mobile Menu -->
                        <div class="col-12">
                            <div class="mobile_menu d-block d-lg-none"></div>
                        </div>
                    </div>
                </div>
           </div>
       </div>
        <!-- Header End -->
    </header>
    <main>

        <!-- Hero Area Start-->
        <div class="slider-area ">
            <div class="single-slider section-overly slider-height2 d-flex align-items-center" data-background="assets/img/hero/about.jpg">
                <div class="container">
                    <div class="row">
                        <div class="col-xl-12">
                            <div class="hero-cap text-center">
                                <h2>Ki·∫øm vi·ªác l√†m</h2>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Hero Area End -->
        <!-- Job List Area Start -->
        <div class="job-listing-area pt-120 pb-120">
            <div class="container">
                <div class="row">
                    <!-- Left content -->
                    <div class="col-xl-3 col-lg-3 col-md-4">
                        <div class="row">
                            <div class="col-12">
                                    <div class="small-section-tittle2 mb-45">
                                    <div class="ion"> <svg 
                                        xmlns="http://www.w3.org/2000/svg"
                                        xmlns:xlink="http://www.w3.org/1999/xlink"
                                        width="20px" height="12px">
                                    <path fill-rule="evenodd"  fill="rgb(27, 207, 107)"
                                        d="M7.778,12.000 L12.222,12.000 L12.222,10.000 L7.778,10.000 L7.778,12.000 ZM-0.000,-0.000 L-0.000,2.000 L20.000,2.000 L20.000,-0.000 L-0.000,-0.000 ZM3.333,7.000 L16.667,7.000 L16.667,5.000 L3.333,5.000 L3.333,7.000 Z"/>
                                    </svg>
                                    </div>
                                    <h4>B·ªô l·ªçc</h4>
                                </div>
                            </div>
                        </div>
                        <!-- Job Category Listing start -->
                        <div class="job-category-listing mb-50">
                            <!-- Job Location Filter -->
                            <div class="single-listing">
                                <div class="select-Categories pb-50">
                                    <div class="small-section-tittle2">
                                        <h4>ƒê·ªãa ƒëi·ªÉm</h4>
                                    </div>
                                    <!-- Select job items start -->
                                    <div class="location-select-wrapper">
                                        <select name="location-select" id="location-filter" class="no-nice-select native-select location-dropdown">
                                            <option value="">T·∫•t c·∫£ ƒë·ªãa ƒëi·ªÉm</option>
                                            <!-- Locations will be populated dynamically -->
                                        </select>
                                    </div>
                                    <!--  Select job items End-->
                                </div>
                            </div>
                            
                            <!-- Experience Filter -->
                            <div class="single-listing">
                                <!-- select-Categories start -->
                                <div class="select-Categories pb-50">
                                    <div class="small-section-tittle2">
                                        <h4>Kinh nghi·ªám</h4>
                                    </div>
                                    <label class="container">Kh√¥ng y√™u c·∫ßu (0 nƒÉm)
                                        <input type="checkbox" value="0" name="experience-filter">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="container">1 nƒÉm
                                        <input type="checkbox" value="1" name="experience-filter">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="container">2 nƒÉm
                                        <input type="checkbox" value="2" name="experience-filter">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="container">3 nƒÉm
                                        <input type="checkbox" value="3" name="experience-filter">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="container">4 nƒÉm
                                        <input type="checkbox" value="4" name="experience-filter">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="container">5+ nƒÉm
                                        <input type="checkbox" value="5" name="experience-filter">
                                        <span class="checkmark"></span>
                                    </label>
                                </div>
                                <!-- select-Categories End -->
                            </div>
                            <!-- Salary Filter -->
                            <div class="single-listing">
                                <div class="select-Categories pb-50">
                                    <div class="small-section-tittle2">
                                        <h4>M·ª©c l∆∞∆°ng (tri·ªáu VND)</h4>
                                    </div>
                                    <label class="container">D∆∞·ªõi 10 tri·ªáu
                                        <input type="checkbox" value="0-10" name="salary-filter">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="container">10 - 15 tri·ªáu
                                        <input type="checkbox" value="10-15" name="salary-filter">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="container">15 - 20 tri·ªáu
                                        <input type="checkbox" value="15-20" name="salary-filter">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="container">20 - 25 tri·ªáu
                                        <input type="checkbox" value="20-25" name="salary-filter">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="container">25 - 30 tri·ªáu
                                        <input type="checkbox" value="25-30" name="salary-filter">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="container">Tr√™n 30 tri·ªáu
                                        <input type="checkbox" value="30+" name="salary-filter">
                                        <span class="checkmark"></span>
                                    </label>
                                    <label class="container">Th·ªèa thu·∫≠n
                                        <input type="checkbox" value="negotiate" name="salary-filter">
                                        <span class="checkmark"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Clear All Filters Button -->
                        <div class="clear-filters-section">
                            <button id="clear-all-filters-btn" class="btn btn-outline-secondary btn-sm" style="width: 100%; margin-top: 15px; padding: 10px; border-radius: 8px; border: 2px solid #ddd; background: #fff; color: #666; font-weight: 500; transition: all 0.3s ease;" onmouseover="this.style.borderColor='#ff4757'; this.style.color='#ff4757'" onmouseout="this.style.borderColor='#ddd'; this.style.color='#666'">
                                <i class="fas fa-times-circle"></i> X√≥a t·∫•t c·∫£ b·ªô l·ªçc
                            </button>
                        </div>
                        
                        <!-- Job Category Listing End -->
                    </div>
                    <!-- Right content -->
                    <div class="col-xl-9 col-lg-9 col-md-8">
                        <!-- Featured_job_start -->
                        <section class="featured-job-area">
                            <div class="container">
                                <!-- Search Bar Start -->
                                <div class="row mb-40">
                                    <div class="col-lg-12">
                                        <div class="search-job-wrapper">
                                            <div class="search-input-container">
                                                <input type="text" id="job-search-input" placeholder="T√¨m ki·∫øm vi·ªác l√†m theo t√™n c√¥ng vi·ªác, m√¥ t·∫£, y√™u c·∫ßu..." autocomplete="off">
                                                <button id="job-search-btn" type="button">
                                                    <i class="fas fa-search"></i>
                                                    <span>T√¨m ki·∫øm</span>
                                                </button>
                                                <button id="job-clear-search-btn" type="button" style="display: none;">
                                                    <i class="fas fa-times"></i>
                                                </button>
                                            </div>
                                            <div id="search-suggestions" class="search-suggestions" style="display: none;"></div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Search Bar End -->
                                
                                <!-- Count of Job list Start -->
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="count-job mb-35">
                                            <span id="job-count">Loading jobs...</span>
                                            <!-- Select job items start -->
                                            <div class="select-job-items">
                                                <span>Sort by</span>
                                                <select name="sort-select" id="sort-select">
                                                    <option value="id">M·∫∑c ƒë·ªãnh</option>
                                                    <option value="salary">M·ª©c l∆∞∆°ng</option>
                                                    <option value="companyName">T√™n c√¥ng ty</option>
                                                </select>
                                            </div>
                                            <!--  Select job items End-->
                                        </div>
                                    </div>
                                </div>
                                <!-- Count of Job list End -->
                                
                                <!-- Loading state -->
                                <div id="loading-state" class="text-center" style="display: none;">
                                    <div class="spinner-border text-primary" role="status">
                                        <span class="sr-only">Loading...</span>
                                    </div>
                                    <p>ƒêang t·∫£i danh s√°ch vi·ªác l√†m...</p>
                                </div>
                                
                                <!-- Error state -->
                                <div id="error-state" class="text-center" style="display: none;">
                                    <div class="alert alert-danger" role="alert">
                                        <h4>Kh√¥ng th·ªÉ t·∫£i danh s√°ch vi·ªác l√†m</h4>
                                        <p>Vui l√≤ng th·ª≠ l·∫°i sau ho·∫∑c ki·ªÉm tra k·∫øt n·ªëi m·∫°ng.</p>
                                        <button class="btn btn-primary" onclick="loadJobs()">Th·ª≠ l·∫°i</button>
                                    </div>
                                </div>
                                
                                <!-- Jobs container -->
                                <div id="jobs-container">
                                    <!-- Jobs will be populated here dynamically -->
                                </div>
                            </div>
                        </section>
                        <!-- Featured_job_end -->
                    </div>
                </div>
            </div>
        </div>
        <!-- Job List Area End -->
        <!--Pagination Start  -->
        <div class="pagination-area pb-115 text-center">
            <div class="container">
                <div class="row">
                    <div class="col-xl-12">
                        <div class="single-wrap d-flex justify-content-center">
                            <nav aria-label="Page navigation example">
                                <ul class="pagination justify-content-start" id="pagination-controls">
                                    <!-- Pagination will be populated dynamically -->
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--Pagination End  -->
        
    </main>
    <footer>
        <!-- Footer Start-->
        <div class="footer-area footer-bg footer-padding">
            <div class="container">
                <div class="row d-flex justify-content-between">
                    <div class="col-xl-3 col-lg-3 col-md-4 col-sm-6">
                       <div class="single-footer-caption mb-50">
                         <div class="single-footer-caption mb-30">
                             <div class="footer-tittle">
                                 <h4>About Us</h4>
                                 <div class="footer-pera">
                                     <p>Heaven frucvitful doesn't cover lesser dvsays appear creeping seasons so behold.</p>
                                </div>
                             </div>
                         </div>

                       </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-4 col-sm-5">
                        <div class="single-footer-caption mb-50">
                            <div class="footer-tittle">
                                <h4>Contact Info</h4>
                                <ul>
                                    <li>
                                    <p>Address :Your address goes
                                        here, your demo address.</p>
                                    </li>
                                    <li><a href="#">Phone : +8880 44338899</a></li>
                                    <li><a href="#">Email : info@colorlib.com</a></li>
                                </ul>
                            </div>

                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-4 col-sm-5">
                        <div class="single-footer-caption mb-50">
                            <div class="footer-tittle">
                                <h4>Important Link</h4>
                                <ul>
                                    <li><a href="#"> View Project</a></li>
                                    <li><a href="#">Contact Us</a></li>
                                    <li><a href="#">Testimonial</a></li>
                                    <li><a href="#">Proparties</a></li>
                                    <li><a href="#">Support</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-4 col-sm-5">
                        <div class="single-footer-caption mb-50">
                            <div class="footer-tittle">
                                <h4>Newsletter</h4>
                                <div class="footer-pera footer-pera2">
                                 <p>Heaven fruitful doesn't over lesser in days. Appear creeping.</p>
                             </div>
                             <!-- Form -->
                             <div class="footer-form" >
                                 <div id="mc_embed_signup">
                                     <form target="_blank" action="https://spondonit.us12.list-manage.com/subscribe/post?u=1462626880ade1ac87bd9c93a&amp;id=92a4423d01"
                                     method="get" class="subscribe_form relative mail_part">
                                         <input type="email" name="email" id="newsletter-form-email" placeholder="Email Address"
                                         class="placeholder hide-on-focus" onfocus="this.placeholder = ''"
                                         onblur="this.placeholder = ' Email Address '">
                                         <div class="form-icon">
                                             <button type="submit" name="submit" id="newsletter-submit"
                                             class="email_icon newsletter-submit button-contactForm"><img src="assets/img/icon/form.png" alt=""></button>
                                         </div>
                                         <div class="mt-10 info"></div>
                                     </form>
                                 </div>
                             </div>
                            </div>
                        </div>
                    </div>
                </div>
               <!--  -->
               <div class="row footer-wejed justify-content-between">
                       <div class="col-xl-3 col-lg-3 col-md-4 col-sm-6">
                          <!-- logo -->
                          <div class="footer-logo mb-20">
                            <a href="index.html"><img src="assets/img/logo/logo2_footer.png" alt=""></a>
                          </div>
                       </div>
                       <div class="col-xl-3 col-lg-3 col-md-4 col-sm-5">
                        <div class="footer-tittle-bottom">
                            <span>5000+</span>
                            <p>Talented Hunter</p>
                        </div>
                       </div>
                       <div class="col-xl-3 col-lg-3 col-md-4 col-sm-5">
                            <div class="footer-tittle-bottom">
                                <span>451</span>
                                <p>Talented Hunter</p>
                            </div>
                       </div>
                       <div class="col-xl-3 col-lg-3 col-md-4 col-sm-5">
                            <!-- Footer Bottom Tittle -->
                            <div class="footer-tittle-bottom">
                                <span>568</span>
                                <p>Talented Hunter</p>
                            </div>
                       </div>
               </div>
            </div>
        </div>
        <!-- footer-bottom area -->
        <div class="footer-bottom-area footer-bg">
            <div class="container">
                <div class="footer-border">
                     <div class="row d-flex justify-content-between align-items-center">
                         <div class="col-xl-10 col-lg-10 ">
                             <div class="footer-copy-right">
                                 <p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
  Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
  <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
                             </div>
                         </div>
                         <div class="col-xl-2 col-lg-2">
                             <div class="footer-social f-right">
                                 <a href="#"><i class="fab fa-facebook-f"></i></a>
                                 <a href="#"><i class="fab fa-twitter"></i></a>
                                 <a href="#"><i class="fas fa-globe"></i></a>
                                 <a href="#"><i class="fab fa-behance"></i></a>
                             </div>
                         </div>
                     </div>
                </div>
            </div>
        </div>
        <!-- Footer End-->
    </footer>

    <!-- Chatbot -->
    <button id="chatbot-toggle" class="chatbot-button">
        <i class="fas fa-comments"></i>
    </button>

    <div id="chatbot-container" class="chatbot-container">
        <!-- Chatbot Header -->
        <div class="chatbot-header">
            <i class="fas fa-robot"></i>
            <h4>Tr·ª£ l√Ω vi·ªác l√†m AI</h4>
            <button id="chatbot-close" class="chatbot-close">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <!-- Messages Area -->
        <div id="chatbot-messages" class="chatbot-messages">
            <div class="message bot">
                <div>üëã Xin ch√†o! T√¥i l√† tr·ª£ l√Ω AI chuy√™n v·ªÅ vi·ªác l√†m.</div>
                <div style="margin-top: 8px;">T√¥i c√≥ th·ªÉ gi√∫p b·∫°n:</div>
                <div style="margin-top: 4px;">‚Ä¢ T√¨m ki·∫øm vi·ªác l√†m ph√π h·ª£p</div>
                <div style="margin-top: 2px;">‚Ä¢ Ph√¢n t√≠ch CV c·ªßa b·∫°n</div>
                <div style="margin-top: 2px;">‚Ä¢ T∆∞ v·∫•n ngh·ªÅ nghi·ªáp</div>
                <div style="margin-top: 8px;">B·∫°n c√≥ th·ªÉ upload CV ƒë·ªÉ t√¥i ph√¢n t√≠ch ho·∫∑c ƒë·∫∑t c√¢u h·ªèi g√¨ ƒë√≥! üòä</div>
            </div>
        </div>

        <!-- Input Area -->
        <div class="chatbot-input-area">
            <!-- CV Upload Area -->
            <div id="cv-upload-area" class="cv-upload-area">
                <input type="file" id="cv-file-input" accept=".pdf,.doc,.docx" />
                <div id="cv-upload-content">
                    <i class="fas fa-upload" style="font-size: 20px; color: #1bcf6b; margin-bottom: 8px;"></i>
                    <div style="font-weight: 500; color: #333;">Upload CV c·ªßa b·∫°n</div>
                    <div class="cv-upload-text">H·ªó tr·ª£ file PDF, DOC, DOCX (t·ªëi ƒëa 5MB)</div>
                </div>
                <div id="cv-file-info" class="cv-file-info" style="display: none;">
                    <div>
                        <i class="fas fa-file-alt"></i>
                        <span id="cv-file-name"></span>
                    </div>
                    <button id="cv-remove-btn" class="cv-remove-btn" title="X√≥a file">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>

            <!-- Chat Input -->
            <div class="chat-input-container">
                <textarea 
                    id="chat-input" 
                    class="chat-input" 
                    placeholder="Nh·∫≠p c√¢u h·ªèi c·ªßa b·∫°n..."
                    rows="1"
                ></textarea>
                <button id="chat-send-btn" class="chat-send-btn">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

	<!-- JS here -->
	
		<!-- All JS Custom Plugins Link Here here -->
        <script src="./assets/js/vendor/modernizr-3.5.0.min.js"></script>
		<!-- Jquery, Popper, Bootstrap -->
		<script src="./assets/js/vendor/jquery-1.12.4.min.js"></script>
        <script src="./assets/js/popper.min.js"></script>
        <script src="./assets/js/bootstrap.min.js"></script>
	    <!-- Jquery Mobile Menu -->
        <script src="./assets/js/jquery.slicknav.min.js"></script>

		<!-- Jquery Slick , Owl-Carousel Range -->
        <script src="./assets/js/owl.carousel.min.js"></script>
        <script src="./assets/js/slick.min.js"></script>
        <script src="./assets/js/price_rangs.js"></script>
		<!-- One Page, Animated-HeadLin -->
        <script src="./assets/js/wow.min.js"></script>
		<script src="./assets/js/animated.headline.js"></script>
        <script src="./assets/js/jquery.magnific-popup.js"></script>

		<!-- Scrollup, nice-select, sticky -->
        <!-- <script src="./assets/js/jquery.scrollUp.min.js"></script> -->
        <script src="./assets/js/jquery.nice-select.min.js"></script>
		<script src="./assets/js/jquery.sticky.js"></script>
        
        <!-- contact js -->
        <script src="./assets/js/contact.js"></script>
        <script src="./assets/js/jquery.form.js"></script>
        <script src="./assets/js/jquery.validate.min.js"></script>
        <script src="./assets/js/mail-script.js"></script>
        <script src="./assets/js/jquery.ajaxchimp.min.js"></script>
        
		<!-- Jquery Plugins, main Jquery -->	
        <script src="./assets/js/plugins.js"></script>
        <script src="./assets/js/main.js"></script>
        
    </body>
</html>

<!-- Complete Job Listing Functionality -->
<script>
    // Global variables
    let allJobs = [];
    let filteredJobs = [];
    let currentPage = 1;
    const jobsPerPage = 10;
    let totalJobs = 0;
    let currentSearchQuery = '';

    // Initialize the page
    document.addEventListener('DOMContentLoaded', function() {
        // Disable nice-select for location filter specifically
        setTimeout(() => {
            const locationSelect = document.getElementById('location-filter');
            if (locationSelect) {
                // Remove any nice-select styling that might be applied
                const wrapper = locationSelect.parentElement;
                const niceSelectWrapper = wrapper.querySelector('.nice-select');
                if (niceSelectWrapper) {
                    console.log('üîß Removing nice-select wrapper...');
                    niceSelectWrapper.remove();
                }
                
                // Force native select appearance
                locationSelect.classList.remove('nice-select');
                locationSelect.style.display = 'block';
                locationSelect.style.visibility = 'visible';
                
                console.log('üéØ Location select element prepared');
            }
        }, 100);
        
        loadLocationFilter();
        loadJobs();
        initializeEventListeners();
    });

    // Event listeners
    function initializeEventListeners() {
        // Location filter
        document.getElementById('location-filter').addEventListener('change', filterJobs);
        
        // Experience filters
        document.querySelectorAll('input[name="experience-filter"]').forEach(checkbox => {
            checkbox.addEventListener('change', filterJobs);
        });
        
        // Salary filters
        document.querySelectorAll('input[name="salary-filter"]').forEach(checkbox => {
            checkbox.addEventListener('change', filterJobs);
        });
        
        // Sort dropdown
        document.getElementById('sort-select').addEventListener('change', sortJobs);
        
        // Search functionality
        const searchInput = document.getElementById('job-search-input');
        const searchBtn = document.getElementById('job-search-btn');
        const clearSearchBtn = document.getElementById('job-clear-search-btn');
        
        // Search button click
        searchBtn.addEventListener('click', performSearch);
        
        // Enter key in search input
        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performSearch();
            }
        });
        
        // Clear search button
        clearSearchBtn.addEventListener('click', clearSearch);
        
        // Clear all filters button
        document.getElementById('clear-all-filters-btn').addEventListener('click', clearAllFilters);
        
        // Real-time search with debounce
        let searchTimeout;
        searchInput.addEventListener('input', function() {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                if (searchInput.value.trim().length > 2) {
                    performSearch();
                } else if (searchInput.value.trim().length === 0) {
                    clearSearch();
                }
            }, 500);
        });
    }

    // Load location filter options
    async function loadLocationFilter() {
        console.log('üîÑ Starting to load location filter...');
        const locationSelect = document.getElementById('location-filter');
        
        if (!locationSelect) {
            console.error('‚ùå Location select element not found!');
            return;
        }
        
        try {
            // Show loading state
            console.log('‚è≥ Setting loading state...');
            locationSelect.innerHTML = '<option value="">ƒêang t·∫£i ƒë·ªãa ƒëi·ªÉm...</option>';
            locationSelect.disabled = true;
            
            console.log('üåê Fetching locations from API...');
            const response = await fetch('http://localhost:8000/api/locations');
            console.log('üì° API Response status:', response.status);
            console.log('üì° API Response headers:', response.headers.get('content-type'));
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            const locations = await response.json();
            console.log('üìç Raw locations data:', locations);
            console.log('üìç Locations type:', typeof locations);
            console.log('üìç Locations length:', Array.isArray(locations) ? locations.length : 'Not an array');
            
            // Clear and reset dropdown
            locationSelect.innerHTML = '<option value="">T·∫•t c·∫£ ƒë·ªãa ƒëi·ªÉm</option>';
            locationSelect.disabled = false;
            
            // Add location options
            if (Array.isArray(locations) && locations.length > 0) {
                console.log('‚úÖ Adding location options...');
                let addedCount = 0;
                locations.forEach((location, index) => {
                    console.log(`Processing location ${index}: "${location}"`);
                    if (location && location.trim()) {
                        const option = document.createElement('option');
                        option.value = location.trim();
                        option.textContent = location.trim();
                        locationSelect.appendChild(option);
                        addedCount++;
                    }
                });
                console.log(`‚úÖ Successfully loaded ${addedCount} unique locations out of ${locations.length} total`);
                console.log('üéØ Final dropdown options count:', locationSelect.options.length);
            } else {
                console.warn('‚ö†Ô∏è No locations data received or invalid format');
                const option = document.createElement('option');
                option.value = '';
                option.textContent = 'Kh√¥ng c√≥ d·ªØ li·ªáu ƒë·ªãa ƒëi·ªÉm';
                option.disabled = true;
                locationSelect.appendChild(option);
            }
            
        } catch (error) {
            console.error('‚ùå Error loading locations:', error);
            console.error('‚ùå Error details:', error.message);
            
            // Reset to default state on error
            locationSelect.innerHTML = '<option value="">T·∫•t c·∫£ ƒë·ªãa ƒëi·ªÉm</option>';
            locationSelect.disabled = false;
            
            // Add error option
            const errorOption = document.createElement('option');
            errorOption.value = '';
            errorOption.textContent = `L·ªói: ${error.message}`;
            errorOption.disabled = true;
            errorOption.style.color = '#dc3545';
            locationSelect.appendChild(errorOption);
        }
    }

    // Load all jobs from API
    async function loadJobs() {
        showLoading();
        
        try {
            // Build URL with all filter parameters
            let url = 'http://localhost:8000/api/jobs?page_size=1000';
            
            // Add search parameter
            if (currentSearchQuery) {
                url += `&search=${encodeURIComponent(currentSearchQuery)}`;
            }
            
            // Add location filter
            const selectedLocation = document.getElementById('location-filter').value;
            if (selectedLocation) {
                url += `&location=${encodeURIComponent(selectedLocation)}`;
            }
            
            // Add experience filters
            const selectedExperience = Array.from(document.querySelectorAll('input[name="experience-filter"]:checked'))
                .map(cb => cb.value);
            if (selectedExperience.length > 0) {
                url += `&experience=${selectedExperience.join(',')}`;
            }
            
            // Add salary filters
            const selectedSalaryRanges = Array.from(document.querySelectorAll('input[name="salary-filter"]:checked'))
                .map(cb => cb.value);
            if (selectedSalaryRanges.length > 0) {
                url += `&salary=${selectedSalaryRanges.join(',')}`;
            }
            
            console.log('üåê API URL:', url);
            
            const response = await fetch(url);
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            const jobs = await response.json();
            
            // All filtering is done on backend now
            allJobs = jobs;
            filteredJobs = [...jobs];
            totalJobs = allJobs.length;
            
            hideLoading();
            displayJobs();
            updateJobCount();
            updatePagination();
            
        } catch (error) {
            console.error('Error loading jobs:', error);
            hideLoading();
            showError();
        }
    }

    // Filter jobs based on selected criteria
    function filterJobs() {
        // All filtering is now done on backend, just reload jobs with all current filters
        currentPage = 1;
        loadJobs();
    }

    // Sort jobs
    function sortJobs() {
        const sortBy = document.getElementById('sort-select').value;
        
        filteredJobs.sort((a, b) => {
            if (sortBy === 'salary') {
                const salaryA = parseFloat(a.maxSalary) || parseFloat(a.minSalary) || 0;
                const salaryB = parseFloat(b.maxSalary) || parseFloat(b.minSalary) || 0;
                return salaryB - salaryA;
            } else if (sortBy === 'companyName') {
                return (a.companyName || '').localeCompare(b.companyName || '');
            }
            return parseInt(a.id) - parseInt(b.id);
        });
        
        displayJobs();
    }

    // Display jobs for current page
    function displayJobs() {
        const startIndex = (currentPage - 1) * jobsPerPage;
        const endIndex = startIndex + jobsPerPage;
        const jobsToShow = filteredJobs.slice(startIndex, endIndex);
        
        const container = document.getElementById('jobs-container');
        
        if (jobsToShow.length === 0) {
            container.innerHTML = `
                <div class="text-center py-5">
                    <h4>Kh√¥ng t√¨m th·∫•y vi·ªác l√†m ph√π h·ª£p</h4>
                    <p>Vui l√≤ng th·ª≠ ƒëi·ªÅu ch·ªânh b·ªô l·ªçc ƒë·ªÉ t√¨m th√™m k·∫øt qu·∫£.</p>
                </div>
            `;
            return;
        }
        
        container.innerHTML = jobsToShow.map(job => createJobCard(job)).join('');
    }

    // Create job card HTML
    function createJobCard(job) {
        const jobType = getJobType(job.experienceYear);
        const jobTypeClass = getJobTypeClass(jobType);
        const experienceText = job.experienceYear ? `EXP: ${job.experienceYear} nƒÉm` : 'EXP: Kh√¥ng y√™u c·∫ßu';
        
        return `
            <div class="single-job-items mb-30" style="cursor: pointer; transition: all 0.3s ease; padding: 30px; border: 1px solid #e8e8e8; border-radius: 12px; background: #fff; position: relative;" 
                 onclick="openJobDetails(${job.id})"
                 onmouseover="this.style.boxShadow='0 8px 25px rgba(0,0,0,0.15)'; this.style.transform='translateY(-3px)'; this.style.borderColor='#ff4757'"
                 onmouseout="this.style.boxShadow='none'; this.style.transform='translateY(0)'; this.style.borderColor='#e8e8e8'">
                <!-- Job type badge and status positioned absolutely to the right -->
                <div class="items-link items-link2" style="position: absolute; top: 30px; right: 30px; display: flex; flex-direction: column; align-items: flex-end; gap: 6px;">
                    <span class="job-type-badge ${jobTypeClass}" style="padding: 6px 14px; border-radius: 15px; font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px;">
                        ${jobType}
                    </span>
                    <span style="color: #999; font-size: 11px; font-weight: 500;">M·ªöI ƒêƒÇNG</span>
                </div>
                <div class="job-items" style="display: flex; align-items: flex-start; gap: 20px; padding-right: 120px;">
                    <div class="company-img" style="flex-shrink: 0;">
                        <img src="${job.companyLogoUrl || 'assets/img/icon/job-list1.png'}" 
                             alt="Company Logo" 
                             style="width: 70px; height: 70px; object-fit: contain; border-radius: 8px; border: 1px solid #f0f0f0;"
                             onerror="this.src='assets/img/icon/job-list1.png'">
                    </div>
                    <div class="job-tittle job-tittle2" style="flex: 1;">
                        <h4 style="color: #1e2147; margin-bottom: 12px; font-size: 22px; font-weight: 700; line-height: 1.3;">
                            ${job.jobTitle || job.field || 'V·ªã tr√≠ tuy·ªÉn d·ª•ng'}
                        </h4>
                        <!-- Company name on first line -->
                        <div style="margin-bottom: 8px;">
                            <div style="display: flex; align-items: center; color: #666; font-size: 14px;">
                                <i class="fas fa-building" style="color: #ff4757; margin-right: 6px; width: 16px;"></i>
                                <span style="font-weight: 500;">${job.companyName || 'C√¥ng ty'}</span>
                            </div>
                        </div>
                        <!-- Location and experience on second line -->
                        <div style="display: flex; gap: 20px; margin-bottom: 15px;">
                            <div style="display: flex; align-items: center; color: #666; font-size: 14px;">
                                <i class="fas fa-map-marker-alt" style="color: #ff4757; margin-right: 6px; width: 16px;"></i>
                                <span>${job.location || 'ƒê·ªãa ƒëi·ªÉm'}</span>
                            </div>
                            <div style="display: flex; align-items: center; color: #666; font-size: 14px;">
                                <i class="fas fa-clock" style="color: #ff4757; margin-right: 6px; width: 16px;"></i>
                                <span style="font-weight: 600; color: #2c5ff0;">${experienceText}</span>
                            </div>
                        </div>
                        <!-- Salary at bottom -->
                        <div style="display: flex; align-items: center; color: #2ed573; font-size: 16px; font-weight: 700;">
                            <i class="fas fa-money-bill-wave" style="color: #ff4757; margin-right: 8px;"></i>
                            ${job.salary || 'Th·ªèa thu·∫≠n'}
                        </div>
                    </div>
                </div>
            </div>
        `;
    }

    // Get job type based on experience
    function getJobType(experienceYear) {
        const exp = parseInt(experienceYear) || 0;
        if (exp === 0) return 'Entry Level';
        if (exp <= 2) return 'Junior';
        if (exp <= 5) return 'Senior';
        return 'Expert';
    }

    // Get job type CSS class
    function getJobTypeClass(jobType) {
        const classes = {
            'Entry Level': 'bg-info text-white',
            'Junior': 'bg-success text-white', 
            'Senior': 'bg-warning text-dark',
            'Expert': 'bg-danger text-white'
        };
        return classes[jobType] || 'bg-secondary text-white';
    }

    // Open job details page
    function openJobDetails(jobId) {
        window.location.href = `job_details.html?id=${jobId}`;
    }

    // Update job count display
    function updateJobCount() {
        const countElement = document.getElementById('job-count');
        let countText = `${filteredJobs.length.toLocaleString()} vi·ªác l√†m ƒë∆∞·ª£c t√¨m th·∫•y`;
        
        // Add filter info if any filters are active
        const activeFilters = [];
        
        if (currentSearchQuery) {
            activeFilters.push(`t√¨m ki·∫øm: "${currentSearchQuery}"`);
        }
        
        const selectedLocation = document.getElementById('location-filter').value;
        if (selectedLocation) {
            activeFilters.push(`ƒë·ªãa ƒëi·ªÉm: ${selectedLocation}`);
        }
        
        const selectedExperience = Array.from(document.querySelectorAll('input[name="experience-filter"]:checked'));
        if (selectedExperience.length > 0) {
            const expText = selectedExperience.map(cb => {
                if (cb.value === '5') return '5+ nƒÉm';
                if (cb.value === '0') return 'Kh√¥ng y√™u c·∫ßu';
                return `${cb.value} nƒÉm`;
            }).join(', ');
            activeFilters.push(`kinh nghi·ªám: ${expText}`);
        }
        
        const selectedSalary = Array.from(document.querySelectorAll('input[name="salary-filter"]:checked'));
        if (selectedSalary.length > 0) {
            const salaryText = selectedSalary.map(cb => {
                if (cb.value === 'negotiate') return 'Th·ªèa thu·∫≠n';
                if (cb.value === '30+') return 'Tr√™n 30 tri·ªáu';
                return cb.value.replace('-', '-') + ' tri·ªáu';
            }).join(', ');
            activeFilters.push(`m·ª©c l∆∞∆°ng: ${salaryText}`);
        }
        
        if (activeFilters.length > 0) {
            countText += ` (v·ªõi ${activeFilters.join(', ')})`;
        }
        
        countElement.textContent = countText;
    }

    // Update pagination
    function updatePagination() {
        const totalPages = Math.ceil(filteredJobs.length / jobsPerPage);
        const paginationContainer = document.getElementById('pagination-controls');
        
        if (totalPages <= 1) {
            paginationContainer.innerHTML = '';
            return;
        }
        
        let paginationHTML = '';
        
        // First page button
        if (currentPage > 1) {
            paginationHTML += `
                <li class="page-item">
                    <a class="page-link" href="#" onclick="goToPage(1)" title="Trang ƒë·∫ßu">
                        <span class="ti-angle-double-left"></span>
                    </a>
                </li>
            `;
        }
        
        // Previous button
        if (currentPage > 1) {
            paginationHTML += `
                <li class="page-item">
                    <a class="page-link" href="#" onclick="goToPage(${currentPage - 1})">
                        <span class="ti-angle-left"></span>
                    </a>
                </li>
            `;
        }
        
        // Page numbers
        const startPage = Math.max(1, currentPage - 2);
        const endPage = Math.min(totalPages, currentPage + 2);
        
        // Show first page if not in range
        if (startPage > 1) {
            paginationHTML += `<li class="page-item"><a class="page-link" href="#" onclick="goToPage(1)">1</a></li>`;
            if (startPage > 2) {
                paginationHTML += `<li class="page-item disabled"><span class="page-link">...</span></li>`;
            }
        }
        
        // Page number buttons
        for (let i = startPage; i <= endPage; i++) {
            paginationHTML += `
                <li class="page-item ${i === currentPage ? 'active' : ''}">
                    <a class="page-link" href="#" onclick="goToPage(${i})">${i}</a>
                </li>
            `;
        }
        
        // Show last page if not in range
        if (endPage < totalPages) {
            if (endPage < totalPages - 1) {
                paginationHTML += `<li class="page-item disabled"><span class="page-link">...</span></li>`;
            }
            paginationHTML += `<li class="page-item"><a class="page-link" href="#" onclick="goToPage(${totalPages})">${totalPages}</a></li>`;
        }
        
        // Next button
        if (currentPage < totalPages) {
            paginationHTML += `
                <li class="page-item">
                    <a class="page-link" href="#" onclick="goToPage(${currentPage + 1})">
                        <span class="ti-angle-right"></span>
                    </a>
                </li>
            `;
        }
        
        // Last page button
        if (currentPage < totalPages) {
            paginationHTML += `
                <li class="page-item">
                    <a class="page-link" href="#" onclick="goToPage(${totalPages})" title="Trang cu·ªëi">
                        <span class="ti-angle-double-right"></span>
                    </a>
                </li>
            `;
        }
        
        paginationContainer.innerHTML = paginationHTML;
    }

    // Go to specific page
    function goToPage(page) {
        currentPage = page;
        displayJobs();
        updatePagination();
        
        // Scroll to top of job listings
        document.querySelector('.job-listing-area').scrollIntoView({ 
            behavior: 'smooth' 
        });
    }

    // Show loading state
    function showLoading() {
        document.getElementById('loading-state').style.display = 'block';
        document.getElementById('error-state').style.display = 'none';
        document.getElementById('jobs-container').style.display = 'none';
    }

    // Hide loading state
    function hideLoading() {
        document.getElementById('loading-state').style.display = 'none';
        document.getElementById('jobs-container').style.display = 'block';
    }

    // Show error state
    function showError() {
        document.getElementById('loading-state').style.display = 'none';
        document.getElementById('error-state').style.display = 'block';
        document.getElementById('jobs-container').style.display = 'none';
    }
    
    // Manual test function for debugging (call this in browser console)
    window.testLocationAPI = async function() {
        console.log('üß™ Testing location API manually...');
        try {
            const response = await fetch('http://localhost:8000/api/locations');
            console.log('Response status:', response.status);
            console.log('Response ok:', response.ok);
            const data = await response.json();
            console.log('Data received:', data);
            console.log('Data type:', typeof data);
            console.log('Is array:', Array.isArray(data));
            console.log('Length:', data?.length);
            return data;
        } catch (error) {
            console.error('Test failed:', error);
            return null;
        }
    };
    
    // Manual reload function
    window.reloadLocations = function() {
        console.log('üîÑ Manually reloading locations...');
        loadLocationFilter();
    };
    
    // Search functionality
    function performSearch() {
        const searchInput = document.getElementById('job-search-input');
        const query = searchInput.value.trim();
        
        if (query.length < 1) {
            clearSearch();
            return;
        }
        
        currentSearchQuery = query;
        updateSearchStatus();
        filterJobs(); // This will now combine search with all other active filters
        
        // Show clear button
        document.getElementById('job-clear-search-btn').style.display = 'block';
        
        console.log(`üîç Searching for: "${query}" with active filters`);
    }
    
    function clearSearch() {
        const searchInput = document.getElementById('job-search-input');
        searchInput.value = '';
        currentSearchQuery = '';
        
        // Hide clear button and search status
        document.getElementById('job-clear-search-btn').style.display = 'none';
        hideSearchStatus();
        
        // Reload with current filters (but without search)
        filterJobs();
        
        console.log('üßπ Search cleared, keeping other active filters');
    }
    
    function updateSearchStatus() {
        const countElement = document.getElementById('job-count');
        
        if (currentSearchQuery) {
            // Create or update search status
            let statusElement = document.getElementById('search-status');
            if (!statusElement) {
                statusElement = document.createElement('div');
                statusElement.id = 'search-status';
                statusElement.className = 'search-status active';
                countElement.parentNode.insertBefore(statusElement, countElement);
            }
            
            statusElement.innerHTML = `
                <i class="fas fa-search"></i>
                <span>K·∫øt qu·∫£ t√¨m ki·∫øm cho: "<strong>${currentSearchQuery}</strong>"</span>
                <button class="close-search" onclick="clearSearch()">
                    <i class="fas fa-times"></i>
                </button>
            `;
            statusElement.style.display = 'inline-flex';
        }
    }
    
    function hideSearchStatus() {
        const statusElement = document.getElementById('search-status');
        if (statusElement) {
            statusElement.style.display = 'none';
        }
    }
    
    // Clear all filters and search
    function clearAllFilters() {
        // Clear search
        const searchInput = document.getElementById('job-search-input');
        searchInput.value = '';
        currentSearchQuery = '';
        
        // Clear location filter
        document.getElementById('location-filter').value = '';
        
        // Clear experience filters
        document.querySelectorAll('input[name="experience-filter"]:checked').forEach(cb => {
            cb.checked = false;
        });
        
        // Clear salary filters
        document.querySelectorAll('input[name="salary-filter"]:checked').forEach(cb => {
            cb.checked = false;
        });
        
        // Hide search elements
        document.getElementById('job-clear-search-btn').style.display = 'none';
        hideSearchStatus();
        
        // Reload all jobs
        filterJobs();
        
        console.log('üßπ All filters and search cleared');
    }
    
    // Debug function to check DOM
    window.debugDropdown = function() {
        console.log('üîç Debugging dropdown...');
        const select = document.getElementById('location-filter');
        if (!select) {
            console.error('‚ùå Select element not found!');
            return;
        }
        
        console.log('üìã Select element:', select);
        console.log('üìã Select innerHTML:', select.innerHTML);
        console.log('üìã Select options count:', select.options.length);
        console.log('üìã Select visibility:', window.getComputedStyle(select).visibility);
        console.log('üìã Select display:', window.getComputedStyle(select).display);
        console.log('üìã Select opacity:', window.getComputedStyle(select).opacity);
        console.log('üìã Select z-index:', window.getComputedStyle(select).zIndex);
        console.log('üìã Select height:', window.getComputedStyle(select).height);
        console.log('üìã Select position:', select.getBoundingClientRect());
        
        // Log all options
        console.log('üìã All options:');
        for (let i = 0; i < select.options.length; i++) {
            console.log(`  Option ${i}: "${select.options[i].text}" (value: "${select.options[i].value}")`);
        }
        
        return select;
    };
    
    // =======================
    // CHATBOT FUNCTIONALITY
    // =======================
    
    let chatbotOpen = false;
    let uploadedCV = null;
    
    // Chatbot API configuration
    const CHATBOT_API_URL = 'https://your-colab-api-url.com/chat'; // Thay th·∫ø b·∫±ng URL API th·ª±c t·∫ø
    
    // Initialize chatbot
    function initializeChatbot() {
        const toggleBtn = document.getElementById('chatbot-toggle');
        const closeBtn = document.getElementById('chatbot-close');
        const container = document.getElementById('chatbot-container');
        const sendBtn = document.getElementById('chat-send-btn');
        const chatInput = document.getElementById('chat-input');
        const cvFileInput = document.getElementById('cv-file-input');
        const cvUploadArea = document.getElementById('cv-upload-area');
        const cvRemoveBtn = document.getElementById('cv-remove-btn');
        
        // Toggle chatbot
        toggleBtn.addEventListener('click', toggleChatbot);
        closeBtn.addEventListener('click', closeChatbot);
        
        // Send message
        sendBtn.addEventListener('click', sendMessage);
        chatInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });
        
        // Auto-resize textarea
        chatInput.addEventListener('input', autoResizeTextarea);
        
        // CV upload handling
        cvUploadArea.addEventListener('click', () => cvFileInput.click());
        cvFileInput.addEventListener('change', handleCVUpload);
        cvRemoveBtn.addEventListener('click', removeCVFile);
        
        // Prevent default drag behaviors
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            cvUploadArea.addEventListener(eventName, preventDefaults, false);
        });
        
        // Highlight drop area when dragging
        ['dragenter', 'dragover'].forEach(eventName => {
            cvUploadArea.addEventListener(eventName, highlight, false);
        });
        ['dragleave', 'drop'].forEach(eventName => {
            cvUploadArea.addEventListener(eventName, unhighlight, false);
        });
        
        // Handle dropped files
        cvUploadArea.addEventListener('drop', handleDrop, false);
    }
    
    function toggleChatbot() {
        const toggleBtn = document.getElementById('chatbot-toggle');
        const container = document.getElementById('chatbot-container');
        
        chatbotOpen = !chatbotOpen;
        
        if (chatbotOpen) {
            container.style.display = 'flex';
            toggleBtn.classList.add('active');
            toggleBtn.innerHTML = '<i class="fas fa-times"></i>';
            
            // Focus on input
            setTimeout(() => {
                document.getElementById('chat-input').focus();
            }, 100);
        } else {
            container.style.display = 'none';
            toggleBtn.classList.remove('active');
            toggleBtn.innerHTML = '<i class="fas fa-comments"></i>';
        }
    }
    
    function closeChatbot() {
        chatbotOpen = false;
        const toggleBtn = document.getElementById('chatbot-toggle');
        const container = document.getElementById('chatbot-container');
        
        container.style.display = 'none';
        toggleBtn.classList.remove('active');
        toggleBtn.innerHTML = '<i class="fas fa-comments"></i>';
    }
    
    function autoResizeTextarea() {
        const textarea = document.getElementById('chat-input');
        textarea.style.height = 'auto';
        textarea.style.height = Math.min(textarea.scrollHeight, 100) + 'px';
    }
    
    async function sendMessage() {
        const chatInput = document.getElementById('chat-input');
        const message = chatInput.value.trim();
        
        if (!message && !uploadedCV) return;
        
        // Disable input while processing
        const sendBtn = document.getElementById('chat-send-btn');
        sendBtn.disabled = true;
        chatInput.disabled = true;
        
        // Add user message to chat
        if (message) {
            addMessage(message, 'user');
            chatInput.value = '';
            autoResizeTextarea();
        }
        
        // Show typing indicator
        addTypingIndicator();
        
        try {
            // Prepare request data
            const requestData = {
                message: message,
                timestamp: new Date().toISOString()
            };
            
            // If CV is uploaded, include it
            if (uploadedCV) {
                requestData.cv_file = uploadedCV;
                requestData.has_cv = true;
            }
            
            // Send request to API
            const response = await sendToAPI(requestData);
            
            // Remove typing indicator
            removeTypingIndicator();
            
            // Add bot response
            if (response && response.response) {
                addMessage(response.response, 'bot');
                
                // If response includes CV analysis, show it
                if (response.cv_analysis) {
                    addMessage(`üìÑ **Ph√¢n t√≠ch CV:**\n${response.cv_analysis}`, 'bot');
                }
                
                // If response includes job recommendations
                if (response.job_recommendations && response.job_recommendations.length > 0) {
                    let jobsText = "üéØ **Vi·ªác l√†m ph√π h·ª£p:**\n";
                    response.job_recommendations.forEach((job, index) => {
                        jobsText += `${index + 1}. ${job.title} - ${job.company}\n`;
                    });
                    addMessage(jobsText, 'bot');
                }
            } else {
                addMessage('Xin l·ªói, t√¥i g·∫∑p v·∫•n ƒë·ªÅ khi x·ª≠ l√Ω y√™u c·∫ßu c·ªßa b·∫°n. Vui l√≤ng th·ª≠ l·∫°i.', 'bot');
            }
            
        } catch (error) {
            console.error('Chatbot API Error:', error);
            removeTypingIndicator();
            addMessage('Xin l·ªói, hi·ªán t·∫°i t√¥i kh√¥ng th·ªÉ k·∫øt n·ªëi ƒë·∫øn server. Vui l√≤ng th·ª≠ l·∫°i sau.', 'bot');
        }
        
        // Re-enable input
        sendBtn.disabled = false;
        chatInput.disabled = false;
        chatInput.focus();
    }
    
    async function sendToAPI(data) {
        // This is a mock function - replace with actual API call
        console.log('üöÄ Sending to API:', data);
        
        // Mock API response - replace this with actual fetch call
        return new Promise((resolve) => {
            setTimeout(() => {
                // Mock responses based on message content
                const message = data.message.toLowerCase();
                
                if (message.includes('cv') || data.has_cv) {
                    resolve({
                        response: "T√¥i ƒë√£ nh·∫≠n ƒë∆∞·ª£c CV c·ªßa b·∫°n. ƒê√¢y l√† ph√¢n t√≠ch chi ti·∫øt:",
                        cv_analysis: "CV c·ªßa b·∫°n c√≥ nh·ªØng ƒëi·ªÉm m·∫°nh:\n‚Ä¢ Kinh nghi·ªám ph√π h·ª£p v·ªõi v·ªã tr√≠\n‚Ä¢ K·ªπ nƒÉng ƒëa d·∫°ng\n‚Ä¢ H·ªçc v·∫•n t·ªët\n\nG·ª£i √Ω c·∫£i thi·ªán:\n‚Ä¢ Th√™m th√¥ng tin v·ªÅ d·ª± √°n c·ª• th·ªÉ\n‚Ä¢ C·∫≠p nh·∫≠t ch·ª©ng ch·ªâ m·ªõi"
                    });
                } else if (message.includes('vi·ªác l√†m') || message.includes('job')) {
                    resolve({
                        response: "T√¥i s·∫Ω t√¨m nh·ªØng vi·ªác l√†m ph√π h·ª£p v·ªõi b·∫°n:",
                        job_recommendations: [
                            { title: "Frontend Developer", company: "C√¥ng ty ABC" },
                            { title: "Full Stack Developer", company: "C√¥ng ty XYZ" }
                        ]
                    });
                } else {
                    resolve({
                        response: `C·∫£m ∆°n b·∫°n ƒë√£ h·ªèi: "${data.message}". T√¥i hi·ªÉu b·∫°n ƒëang quan t√¢m v·ªÅ v·∫•n ƒë·ªÅ n√†y. B·∫°n c√≥ th·ªÉ cung c·∫•p th√™m th√¥ng tin ƒë·ªÉ t√¥i t∆∞ v·∫•n ch√≠nh x√°c h∆°n kh√¥ng?`
                    });
                }
            }, 1500);
        });
        
        // Uncomment and modify this for actual API call:
        /*
        try {
            const formData = new FormData();
            formData.append('message', data.message);
            formData.append('timestamp', data.timestamp);
            
            if (data.cv_file) {
                formData.append('cv_file', data.cv_file);
            }
            
            const response = await fetch(CHATBOT_API_URL, {
                method: 'POST',
                body: formData,
                headers: {
                    // Add any required headers
                }
            });
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            return await response.json();
        } catch (error) {
            console.error('API Error:', error);
            throw error;
        }
        */
    }
    
    function addMessage(text, type) {
        const messagesContainer = document.getElementById('chatbot-messages');
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${type}`;
        
        // Handle markdown-like formatting
        const formattedText = text
            .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
            .replace(/\n/g, '<br>');
        
        messageDiv.innerHTML = formattedText;
        
        messagesContainer.appendChild(messageDiv);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }
    
    function addTypingIndicator() {
        const messagesContainer = document.getElementById('chatbot-messages');
        const typingDiv = document.createElement('div');
        typingDiv.className = 'message typing';
        typingDiv.id = 'typing-indicator';
        typingDiv.innerHTML = `
            <span>ƒêang tr·∫£ l·ªùi</span>
            <div class="typing-indicator">
                <span></span>
                <span></span>
                <span></span>
            </div>
        `;
        
        messagesContainer.appendChild(typingDiv);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }
    
    function removeTypingIndicator() {
        const typingIndicator = document.getElementById('typing-indicator');
        if (typingIndicator) {
            typingIndicator.remove();
        }
    }
    
    // CV Upload Functions
    function handleCVUpload(e) {
        const file = e.target.files[0];
        if (file) {
            processCVFile(file);
        }
    }
    
    function handleDrop(e) {
        const dt = e.dataTransfer;
        const files = dt.files;
        
        if (files.length > 0) {
            processCVFile(files[0]);
        }
    }
    
    function processCVFile(file) {
        // Validate file
        const maxSize = 5 * 1024 * 1024; // 5MB
        const allowedTypes = ['application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
        
        if (file.size > maxSize) {
            alert('File qu√° l·ªõn. Vui l√≤ng ch·ªçn file d∆∞·ªõi 5MB.');
            return;
        }
        
        if (!allowedTypes.includes(file.type)) {
            alert('ƒê·ªãnh d·∫°ng file kh√¥ng ƒë∆∞·ª£c h·ªó tr·ª£. Vui l√≤ng ch·ªçn file PDF, DOC ho·∫∑c DOCX.');
            return;
        }
        
        // Store file
        uploadedCV = file;
        
        // Update UI
        const uploadContent = document.getElementById('cv-upload-content');
        const fileInfo = document.getElementById('cv-file-info');
        const fileName = document.getElementById('cv-file-name');
        const uploadArea = document.getElementById('cv-upload-area');
        
        uploadContent.style.display = 'none';
        fileInfo.style.display = 'flex';
        fileName.textContent = file.name;
        uploadArea.classList.add('has-file');
        
        // Add success message
        addMessage(`‚úÖ ƒê√£ upload CV: ${file.name}. B·∫°n c√≥ th·ªÉ h·ªèi t√¥i ph√¢n t√≠ch CV n√†y.`, 'bot');
    }
    
    function removeCVFile() {
        uploadedCV = null;
        
        const uploadContent = document.getElementById('cv-upload-content');
        const fileInfo = document.getElementById('cv-file-info');
        const uploadArea = document.getElementById('cv-upload-area');
        const fileInput = document.getElementById('cv-file-input');
        
        uploadContent.style.display = 'block';
        fileInfo.style.display = 'none';
        uploadArea.classList.remove('has-file');
        fileInput.value = '';
    }
    
    function preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
    }
    
    function highlight(e) {
        document.getElementById('cv-upload-area').classList.add('dragover');
    }
    
    function unhighlight(e) {
        document.getElementById('cv-upload-area').classList.remove('dragover');
    }
    
    // Initialize chatbot when page loads
    document.addEventListener('DOMContentLoaded', function() {
        // Add small delay to ensure other scripts are loaded
        setTimeout(initializeChatbot, 500);
    });
</script>